var net = require('net');
exports.run = function(port)
{
    var server = net.createServer(function(connection) {
        console.log('Client connected');
        connection.on('end', function() {
            console.log('Client disconnected');
        });
        connection.on('data', function (data) {
            console.log(data.toString());
            if (data.toString() == "ping")
            {
                console.log('pong');
            }
            else
            {
                console.log('I donâ€™t know, sorry :(');
            }
        });
        connection.write('Greetings traveler !');
        connection.pipe(connection);
    });
    server.listen(port, function() {
        console.log('Server is listening on port : ' + port);
    });
}
